<!DOCTYPE HTML>
<html>
<head>
    <link type="text/css" rel="stylesheet" href="../engine/styles/style.css"/>
    <link type="text/css" rel="stylesheet" href="../engine/clientlibs/syntaxhighlighter/sh/styles/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="../engine/clientlibs/syntaxhighlighter/sh/styles/shThemeDefault.css"/>

    <script src="../engine/libs/bookifier.js"></script>
    <script src="../engine/libs/formattingTagProcessor.js"></script>
    <script src="../engine/libs/metadata.js"></script>
    <script src="../engine/libs/simpleDown.js"></script>
    <script src="../engine/libs/srcLoader.js"></script>
    <script src="../engine/libs/tagExpander.js"></script>
    <script src="../engine/libs/taskParser.js"></script>
    <script src="../engine/libs/titleExtractor.js"></script>
    <script src="../engine/libs/loadFile.js"></script>
    <script src="../engine/libs/tocBuilder.js"></script>
    <script src="../engine/clientlibs/jquery.js"></script>
    <script src="../engine/clientlibs/misc.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shCore.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushCss.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushJScript.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushXml.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushJava.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushPhp.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushPlain.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushPython.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushRuby.js"></script>
    <script src="../engine/clientlibs/syntaxhighlighter/sh/scripts/shBrushErlang.js"></script>

    <script>
    SyntaxHighlighter.config.clipboardSwf = '../engine/clientlibs/syntaxhighlighter/sh/scripts/clipboard.swf';

    //file:///C:/tmp/xhrtest/showdown/src/1.html?document/events/01-introduction-browser-events.md
    var bookifier = new Bookifier();

    Metadata.read();

    if (!location.search) {
        alert('No document');
    } else {
        var path = location.search.substr(1);
        sections = bookifier.convert(path);
        sections.head && document.write(sections.head);
        sections.title && document.write('<title>'+sections.title+'</title>');

        $(function() {

            var navLink = '<a href="nav.html">Navigation</a>';
            document.getElementById('result').innerHTML =  navLink+ '<h1>'+sections.title
                    +'</h1>'+(sections.toc||'')+(sections.teaser ? (sections.teaser + '<div class="cut"></div>') : '')
                    + (sections.body || '')
                    + navLink;

            SyntaxHighlighter.highlight()
        })

    }

    </script>
</head>
<body>
<div id="result" data-code-trusted="true" style="margin-left: 300px;width:695px"></div>

</body>

</html>
